mn0 <- with(pm0, tapply(Sample.Value, State.Code, mean, na.rm=TRUE))
str(mn0)
mn1 <- with(pm1, tapply(Sample.Value, State.Code, mean, na.rm=TRUE))
str(mn1)
summary(mn0)
summary(mn1)
d0 <- data.frame(names(mn0), mean=mn0)
d0 <- data.frame(statenames(mn0), mean=mn0)
d0 <- data.frame(state=names(mn0), mean=mn0)
d0
head(d0)
names(mn0)
d1 <- data.frame(state=names(mn1), mean=mn1)
mrg <- merge(d0,d1,by = 'state')
dim(mrg)
head(mrg)
with(mrg, plot(rep(1,52),mrg[,2],xlim=c(.5,2.5)))
with(mrg, plot(rep(2,52),mrg[,3]))
with(mrg, points(rep(2,52),mrg[,3]))
with(mrg, plot(rep(1,52),mrg[,2],xlim=c(.5,2.5)))
with(mrg, points(rep(2,52),mrg[,3]))
segments(rep(1,52),mrg[,2],rep(2,52),mrg[,3])
mrg[mrg$mean.x < mrg$mean.y]
mrg[mrg$mean.x < mrg$mean.y, ]
getwd()
setwd('/home/kevintham/work/datasciencecoursera/ExData_Plotting2/')
source('~/work/datasciencecoursera/ExData_Plotting2/plot1.R', echo=TRUE)
head(NEI)
head(SCC)
names(SC)
names(SCC)
dir()
head(NEI)
x <- with(NEI, tapply(Emissions, year, sum))
head(x)
x
barplot(x)
?barplot
barplot(x, main='Total PM2.5 emission from all sources', xlab='Year',
ylab='PM2.5')
source('~/work/datasciencecoursera/ExData_Plotting2/plot1.R', echo=TRUE)
head(NEI)
dim(NEI)
dim(NEI['fips'='24510'])
dim(NEI[fips='24510'])
dim(NEI[,fips='24510'])
dim(NEI[NEI[fips='24510']])
dim(NEI[NEI[,fips='24510']])
NEI[,fips='24510']
NEI[,fips=='24510']
head(NEI[,'fips'=='24510'])
head(NEI['fips'=='24510'])
NEI['fips'=='24510']
dim(NEI[NEI$fips=='24510'])
dim(NEI[,NEI$fips=='24510'])
dim(NEI[NEI$fips=='24510',])
pm25_balt <- with(NEI[NEI$fips=='24510'], tapply(Emissions, year, sum))
pm25_balt <- with(NEI[NEI$fips=='24510',], tapply(Emissions, year, sum))
barplot(pm25_balt, main='Total PM2.5 emission from all sources', xlab='Year',
ylab='PM2.5')
source('~/work/datasciencecoursera/ExData_Plotting2/plot2.R', echo=TRUE)
source('~/work/datasciencecoursera/ExData_Plotting2/plot2.R', echo=TRUE)
NEI_balt <- subset(NEI, fips='24510')
dim(NEI_balt)
?subset
NEI_balt <- subset(NEI, fips=='24510')
?subset
dim(NEI_balt)
head(NEI_balt)
library('ggplot2')
?split
split(NEI_balt, type)
split(NEI_balt, NEI_balt$type)
head(split(NEI_balt, NEI_balt$type))
head(split(NEI_balt, NEI_balt$type)[1])
dim(split(NEI_balt, NEI_balt$type))
head(split(NEI_balt, NEI_balt$type)[[1])
head(split(NEI_balt, NEI_balt$type)[[1]])
head(split(NEI_balt, NEI_balt$type)[[2]])
head(split(NEI_balt, NEI_balt$type)[[2]])
head(split(NEI_balt, NEI_balt$type)[[3]])
head(split(NEI_balt, NEI_balt$type)[[4]])
with(NEI_balt,tapply(Emissions, list(year,type),sum))
NEI_balt <- subset(NEI, fips=='24510')
NEI_balt_year-type <- with(NEI_balt,tapply(Emissions, list(year,type),sum))
NEI_balt_year_type <- with(NEI_balt,tapply(Emissions, list(year,type),sum))
library('dplyr')
NEI_balt_year_type %>% gather(type, Emissions, names(NEI_balt_year_type))
library('tidyr')
NEI_balt_year_type %>% gather(type, Emissions, names(NEI_balt_year_type))
class(NEI_balt_year_type)
as.data.frame(NEI_balt_year_type)
class(as.data.frame(NEI_balt_year_type))
NEI_balt_year_type <- as.data.frame(with(NEI_balt,tapply(Emissions, list(year,type),sum)))
NEI_balt_year_type %>% gather(type, Emissions, names(NEI_balt_year_type))
names(with(NEI_balt,tapply(Emissions, list(year,type),sum)))
?as.data.frame
na <- NEI$Emissions==NA
na
rownames(with(NEI_balt,tapply(Emissions, list(year,type),sum)))
library('data.table')
head(NEI_balt_year_type)
setDT(NEI_balt_year_type,keep.rownames = TRUE)
setDT(NEI_balt_year_type,keep.rownames = TRUE)[]
NEI_balt_year_type <- as.data.frame(with(NEI_balt,tapply(Emissions, list(year,type),sum)))
?setDT
setDT(NEI_balt_year_type,keep.rownames = TRUE, key='Year')
NEI_balt_year_type
NEI_balt_year_type <- as.data.frame(with(NEI_balt,tapply(Emissions, list(year,type),sum)))
NEI_balt_year_type
setDT(NEI_balt_year_type,keep.rownames = TRUE)
NEI_balt_year_type
NEI_balt_year_type[]
class(NEI_balt_year_type)
names(NEI_balt_year_type)
names(NEI_balt_year_type)[1] <- 'Year'
names(NEI_balt_year_type)
?geom_bar
source('~/work/datasciencecoursera/ExData_Plotting2/plot3.R', echo=TRUE)
plot3 <- function() {
NEI_balt <- subset(NEI, fips=='24510')
NEI_balt_year_type <- as.data.frame(with(NEI_balt,
tapply(Emissions, list(year,type),sum)))
setDT(NEI_balt_year_type,keep.rownames = TRUE)
names(NEI_balt_year_type)[1] <- 'Year'
NEI_balt_year_type <- NEI_balt_year_type %>%
gather(Type, Emissions, names(NEI_balt_year_type))
g <- ggplot(NEI_balt_year_type, aes(Year, Emissions)) +
geom_bar() + facet_grid(.~ Type)
ggsave('plot3.png')
cat('Plot 3 has been saved in', getwd())
}
plot3()
NEI_balt <- subset(NEI, fips=='24510')
NEI_balt_year_type <- as.data.frame(with(NEI_balt,
tapply(Emissions, list(year,type),sum)))
setDT(NEI_balt_year_type,keep.rownames = TRUE)
names(NEI_balt_year_type)[1] <- 'Year'
NEI_balt_year_type <- NEI_balt_year_type %>%
gather(Type, Emissions, names(NEI_balt_year_type))
NEI_balt_year_type
NEI_balt <- subset(NEI, fips=='24510')
NEI_balt_year_type <- as.data.frame(with(NEI_balt,
tapply(Emissions, list(year,type),sum)))
setDT(NEI_balt_year_type,keep.rownames = TRUE)
names(NEI_balt_year_type)[1] <- 'Year'
NEI_balt_year_type
gather(NEI_balt_year_type, Type, Emissions, names(NEI_balt_year_type))
gather(NEI_balt_year_type, Type, Emissions, names(NEI_balt_year_type)[-1])
NEI <- readRDS("summarySCC_PM25.rds")
SCC <- readRDS("Source_Classification_Code.rds")
plot3 <- function() {
NEI_balt <- subset(NEI, fips=='24510')
NEI_balt_year_type <- as.data.frame(with(NEI_balt,
tapply(Emissions, list(year,type),sum)))
setDT(NEI_balt_year_type,keep.rownames = TRUE)
names(NEI_balt_year_type)[1] <- 'Year'
NEI_balt_year_type <- NEI_balt_year_type %>%
gather(Type, Emissions, names(NEI_balt_year_type)[-1])
g <- ggplot(NEI_balt_year_type, aes(Year, Emissions)) +
geom_bar() + facet_grid(.~ Type)
ggsave('plot3.png')
cat('Plot 3 has been saved in', getwd())
}
plot3()
plot3 <- function() {
NEI_balt <- subset(NEI, fips=='24510')
NEI_balt_year_type <- as.data.frame(with(NEI_balt,
tapply(Emissions, list(year,type),sum)))
setDT(NEI_balt_year_type,keep.rownames = TRUE)
names(NEI_balt_year_type)[1] <- 'Year'
NEI_balt_year_type <- NEI_balt_year_type %>%
gather(Type, Emissions, names(NEI_balt_year_type)[-1])
g <- ggplot(NEI_balt_year_type, aes(Year, Emissions)) +
geom_bar(stat='identity') + facet_grid(.~ Type)
ggsave('plot3.png')
cat('Plot 3 has been saved in', getwd())
}
plot3()
g <- ggplot(NEI_balt_year_type, aes(Year, Emissions)) +
geom_bar(stat='identity') + facet_grid(.~ Type) + ggtitle('Total Emissions in Baltimore')
ggsave('plot3.png')
plot3 <- function() {
NEI_balt <- subset(NEI, fips=='24510')
NEI_balt_year_type <- as.data.frame(with(NEI_balt,
tapply(Emissions, list(year,type),sum)))
setDT(NEI_balt_year_type,keep.rownames = TRUE)
names(NEI_balt_year_type)[1] <- 'Year'
NEI_balt_year_type <- NEI_balt_year_type %>%
gather(Type, Emissions, names(NEI_balt_year_type)[-1])
g <- ggplot(NEI_balt_year_type, aes(Year, Emissions)) +
geom_bar(stat='identity') + facet_grid(.~ Type, ncol=2)
ggsave('plot3.png')
cat('Plot 3 has been saved in', getwd())
}
plot3()
plot3 <- function() {
NEI_balt <- subset(NEI, fips=='24510')
NEI_balt_year_type <- as.data.frame(with(NEI_balt,
tapply(Emissions, list(year,type),sum)))
setDT(NEI_balt_year_type,keep.rownames = TRUE)
names(NEI_balt_year_type)[1] <- 'Year'
NEI_balt_year_type <- NEI_balt_year_type %>%
gather(Type, Emissions, names(NEI_balt_year_type)[-1])
g <- ggplot(NEI_balt_year_type, aes(Year, Emissions)) +
geom_bar(stat='identity') + facet_wrap(.~ Type, ncol=2)
ggsave('plot3.png')
cat('Plot 3 has been saved in', getwd())
}
plot3()
g <- ggplot(NEI_balt_year_type, aes(Year, Emissions)) +
geom_bar(stat='identity') + facet_grid(.~ Type)
ggsave('plot3.png')
cat('Plot 3 has been saved in', getwd())
plot3 <- function() {
NEI_balt <- subset(NEI, fips=='24510')
NEI_balt_year_type <- as.data.frame(with(NEI_balt,
tapply(Emissions, list(year,type),sum)))
setDT(NEI_balt_year_type,keep.rownames = TRUE)
names(NEI_balt_year_type)[1] <- 'Year'
NEI_balt_year_type <- NEI_balt_year_type %>%
gather(Type, Emissions, names(NEI_balt_year_type)[-1])
g <- ggplot(NEI_balt_year_type, aes(Year, Emissions)) +
geom_bar(stat='identity') + facet_grid(.~ Type)
ggsave('plot3.png')
cat('Plot 3 has been saved in', getwd())
}
plot3()
plot3 <- function() {
NEI_balt <- subset(NEI, fips=='24510')
NEI_balt_year_type <- as.data.frame(with(NEI_balt,
tapply(Emissions, list(year,type),sum)))
setDT(NEI_balt_year_type,keep.rownames = TRUE)
names(NEI_balt_year_type)[1] <- 'Year'
NEI_balt_year_type <- NEI_balt_year_type %>%
gather(Type, Emissions, names(NEI_balt_year_type)[-1])
g <- ggplot(NEI_balt_year_type, aes(Year, Emissions)) +
geom_bar(stat='identity') + facet_wrap(.~ Type)
ggsave('plot3.png')
cat('Plot 3 has been saved in', getwd())
}
plot3()
plot3 <- function() {
NEI_balt <- subset(NEI, fips=='24510')
NEI_balt_year_type <- as.data.frame(with(NEI_balt,
tapply(Emissions, list(year,type),sum)))
setDT(NEI_balt_year_type,keep.rownames = TRUE)
names(NEI_balt_year_type)[1] <- 'Year'
NEI_balt_year_type <- NEI_balt_year_type %>%
gather(Type, Emissions, names(NEI_balt_year_type)[-1])
g <- ggplot(NEI_balt_year_type, aes(Year, Emissions)) +
geom_bar(stat='identity') + facet_wrap(~ Type)
ggsave('plot3.png')
cat('Plot 3 has been saved in', getwd())
}
plot3()
plot3 <- function() {
NEI_balt <- subset(NEI, fips=='24510')
NEI_balt_year_type <- as.data.frame(with(NEI_balt,
tapply(Emissions, list(year,type),sum)))
setDT(NEI_balt_year_type,keep.rownames = TRUE)
names(NEI_balt_year_type)[1] <- 'Year'
NEI_balt_year_type <- NEI_balt_year_type %>%
gather(Type, Emissions, names(NEI_balt_year_type)[-1])
g <- ggplot(NEI_balt_year_type, aes(Year, Emissions)) +
geom_bar(stat='identity') + facet_wrap(~ Type) + ggtitle('Total emissions in Baltimore')
ggsave('plot3.png')
cat('Plot 3 has been saved in', getwd())
}
plot3()
?ggtitle
?labs
head(NEI)
names(SCC)
head(SCC$Data.Category)
head(SCC$SCC)
head(SCC$Short.Name)
class(SCC$Short.Name[[1]])
SCC$Short.Name[[1]]
as.character(SSC$Short.Name[[1]])
as.character(SSC$Short.Name)
head(as.character(SCC$Short.Name))
?grep
x <- grep(' Coal', as.character(SCC$Short.Name))
dim(x)
length(x)
tail(x)
as.character(SCC$Short.Name)[9055]
as.character(SCC$Short.Name)[9061]
dim(SCC)
x
as.character(SCC$Short.Name)[25]
SCC$SCC[x]
dim(SCC$SCC[x])
length(SCC$SCC[x])
head(NEI)
coal_source <- grep(' Coal', as.character(SCC$Short.Name))
SCC_coal <- SCC$SCC[coal_source]
plot4 <- function() {
coal_source <- grep(' Coal', as.character(SCC$Short.Name))
SCC_coal <- SCC$SCC[coal_source]
}
pm25_year_coal <- with(NEI[SS_coal,], tapply(Emissions, year, sum))
pm25_year_coal <- with(NEI[SCC_coal,], tapply(Emissions, year, sum))
head(pm25_year_coal)
pm25_year_coal
NEI_coal <- subset(NEI, SCC==SCC_coal)
NEI$SCC==SCC_coal
?subset
NEI$SCC %in% SCC_coal
sum(NEI$SCC %in% SCC_coal)
coal_source <- grep(' Coal', as.character(SCC$Short.Name))
SCC_coal <- SCC$SCC[coal_source]
NEI_coal <- subset(NEI, SCC %in% SCC_coal)
pm25_year_coal <- with(NEI_coal, tapply(Emissions, year, sum))
head(pm25_year_coal)
plot(pm25_year_coal)
barplot(pm25_year_coal)
pm25_year_coal
barplot(pm25_year_coal)
plot(1,1)
dev.off()
barplot(pm25_year_coal)
dev.off()
barplot(pm25_year_coal)
head(NEI_coal[c(SCC,year,Emissions)])
head(NEI_coal[c('SCC','year','Emissions')])
NEI_coal <- subset(NEI, SCC %in% SCC_coal)
pm25_year_coal <- NEI_coal[c('year','Emissions')] %>%
group_by(year) %>% summarise(Total.Emissions = sum(Emissions))
pm25_year_coal
library('dplyr')
pm25_year_coal <- NEI_coal[c('year','Emissions')] %>%
group_by(year) %>% summarise(Total.Emissions = sum(Emissions))
pm25_year_coal
source('~/work/datasciencecoursera/ExData_Plotting2/plot4.R', echo=TRUE)
coal_source <- grep(' Coal', as.character(SCC$Short.Name))
SCC_coal <- SCC$SCC[coal_source]
NEI_coal <- subset(NEI, SCC %in% SCC_coal)
pm25_year_coal <- NEI_coal[c('year','Emissions')] %>%
group_by(year) %>% summarise(Total.Emissions = sum(Emissions))
head(pm25_year_coal)
head(NEI_coal)
class(NEI_coal)
as.data.frame.table()
NEI_coal <- as.data.frame.table(subset(NEI, SCC %in% SCC_coal))
pm25_year_coal <- NEI_coal[c('year','Emissions')] %>%
group_by(year) %>% summarise(Total.Emissions = sum(Emissions))
head(NEI_coal)
head(NEI)
coal_source <- grep(' Coal', as.character(SCC$Short.Name))
SCC_coal <- SCC$SCC[coal_source]
NEI_coal <- subset(NEI, SCC %in% SCC_coal)
pm25_year_coal <- NEI_coal[c('year','Emissions')] %>%
group_by(year) %>% summarise(Total.Emissions = sum(Emissions))
names(pm25_year_coal)
pm25_year_coal
g <- ggplot(pm25_year_coal,aes(year,Total.Emissions)) + geom_bar(stat='identity')
g
pm25_year_coal$year <- as.factor(pm25_year_coal$year)
pm25_year_coal
g <- ggplot(pm25_year_coal,aes(year,Total.Emissions)) + geom_bar(stat='identity')
g
plot4 <- function() {
coal_source <- grep(' Coal', as.character(SCC$Short.Name))
SCC_coal <- SCC$SCC[coal_source]
NEI_coal <- subset(NEI, SCC %in% SCC_coal)
pm25_year_coal <- NEI_coal[c('year','Emissions')] %>%
group_by(year) %>% summarise(Total.Emissions = sum(Emissions))
pm25_year_coal$year <- as.factor(pm25_year_coal$year)
g <- ggplot(pm25_year_coal,aes(year,Total.Emissions)) + geom_bar(stat='identity')
g + ggtitle('Emissions from coal combustion-related sources across the US')
ggsave('plot4.png')
cat('Plot 4 has been saved in', getwd())
}
plot4()
?sum
plot3 <- function() {
NEI_balt <- subset(NEI, fips=='24510')
NEI_balt_year_type <- as.data.frame(with(NEI_balt,
tapply(Emissions, list(year,type),sum)))
setDT(NEI_balt_year_type,keep.rownames = TRUE)
names(NEI_balt_year_type)[1] <- 'Year'
NEI_balt_year_type <- NEI_balt_year_type %>%
gather(Type, Emissions, names(NEI_balt_year_type)[-1])
g <- ggplot(NEI_balt_year_type, aes(Year, Emissions)) +
geom_bar(stat='identity') + facet_wrap(~ Type) + ggtitle('Total emissions in Baltimore')
ggsave('plot3.png')
cat('Plot 3 has been saved in', getwd())
}
plot3()
plot2 <- function() {
png(filename = 'plot2.png', width = 480, height = 480)
pm25_balt <- with(NEI[NEI$fips=='24510',], tapply(Emissions, year, sum))
barplot(pm25_balt, main='Total PM2.5 emission from all sources in Baltimore', xlab='Year',
ylab='PM2.5')
dev.off()
cat('Plot 2 has been saved in', getwd())
}
plot2()
head(SCC)
names(SCC)
head(NEI)
baltimore <- '24510'
NEI_balt_onroad <- subset(NEI, fips==baltimore & type=='ONROAD')
head(NEI_balt_onroad)
table(NEI$type)
NEI_balt_onroad <- subset(NEI, fips==baltimore & type=='ON-ROAD')
head(NEI_balt_onroad)
dim(NEI_balt_onroad)
%>% summarise(Total.Emissions = sum(Emissions))
%>% group_by(year) %>% summarise(Total.Emissions = sum(Emissions))
pm25_balt_onroad_year <- NEI_balt_onroad[,c('year','Emissions')] %>%
group_by(year) %>% summarise(Total.Emissions = sum(Emissions))
pm25_balt_onroad_year
plot5 <- function() {
baltimore <- '24510'
NEI_balt_onroad <- subset(NEI, fips==baltimore & type=='ON-ROAD')
pm25_balt_onroad_year <- NEI_balt_onroad[,c('year','Emissions')] %>%
group_by(year) %>% summarise(Total.Emissions = sum(Emissions))
g <- ggplot(pm25_balt_onroad_year, aes(year, Total.Emissions)) + geom_bar(stat='identity')
g + ggtitle("Emissions from motor vehicle sources in Baltimore")
ggsave('plot5.png')
cat('Plot 5 has been saved in', getwd())
}
plot5()
LA <- '06037'
baltimore <- '24510'
NEI_baLA_onroad <- subset(NEI, fips %in% c(LA, baltimore) & type=='ON-ROAD')
?group_by
pm25_baLA_onroad_year <- NEI_baLA_onroad[,c('fips','year','Emissions')] %>%
group_by(fips, year) %>% summarise(Total.Emissions = sum(Emissions))
pm25_baLA_onroad_year
y
y
names(pm25_baLA_onroad_year)[1] <- 'city'
pm25_baLA_onroad_year$city <- as.factor(pm25_baLA_onroad_year)
pm25_baLA_onroad_year$city <- as.factor(pm25_baLA_onroad_year$city)
levels(pm25_baLA_onroad_year$city)
levels(pm25_baLA_onroad_year) <- c('LA','Baltimore')
pm25_baLA_onroad_year
NEI_baLA_onroad <- subset(NEI, fips %in% c(LA, baltimore) & type=='ON-ROAD')
pm25_baLA_onroad_year <- NEI_baLA_onroad[,c('fips','year','Emissions')] %>%
group_by(fips, year) %>% summarise(Total.Emissions = sum(Emissions))
names(pm25_baLA_onroad_year)[1] <- 'city'
pm25_baLA_onroad_year$city <- as.factor(pm25_baLA_onroad_year$city)
levels(pm25_baLA_onroad_year$city) <- c('LA','Baltimore')
pm25_baLA_onroad_year
plot6 <- function() {
LA <- '06037'
baltimore <- '24510'
NEI_baLA_onroad <- subset(NEI, fips %in% c(LA, baltimore) & type=='ON-ROAD')
pm25_baLA_onroad_year <- NEI_baLA_onroad[,c('fips','year','Emissions')] %>%
group_by(fips, year) %>% summarise(Total.Emissions = sum(Emissions))
names(pm25_baLA_onroad_year)[1] <- 'city'
pm25_baLA_onroad_year$city <- as.factor(pm25_baLA_onroad_year$city)
levels(pm25_baLA_onroad_year$city) <- c('LA','Baltimore')
g <- ggplot(pm25_baLA_onroad_year, aes(year, Total.Emissions))
g + geom_bar(stat='identity') + facet_grid(.~ city) +
ggtitle('Comparison of Motor Vehicle Emissions from LA and Baltimore')
ggsave('plot6.png')
cat('Plot 6 has been saved in', getwd())
}
plot6()
plot6 <- function() {
LA <- '06037'
baltimore <- '24510'
NEI_baLA_onroad <- subset(NEI, fips %in% c(LA, baltimore) & type=='ON-ROAD')
pm25_baLA_onroad_year <- NEI_baLA_onroad[,c('fips','year','Emissions')] %>%
group_by(fips, year) %>% summarise(Total.Emissions = sum(Emissions))
names(pm25_baLA_onroad_year)[1] <- 'city'
pm25_baLA_onroad_year$city <- as.factor(pm25_baLA_onroad_year$city)
levels(pm25_baLA_onroad_year$city) <- c('LA','Baltimore')
g <- ggplot(pm25_baLA_onroad_year, aes(year, Total.Emissions))
g + geom_bar(stat='identity') + facet_grid(.~ city, scales='free') +
ggtitle('Comparison of Motor Vehicle Emissions from LA and Baltimore')
ggsave('plot6.png')
cat('Plot 6 has been saved in', getwd())
}
plot6()
plot6 <- function() {
LA <- '06037'
baltimore <- '24510'
NEI_baLA_onroad <- subset(NEI, fips %in% c(LA, baltimore) & type=='ON-ROAD')
pm25_baLA_onroad_year <- NEI_baLA_onroad[,c('fips','year','Emissions')] %>%
group_by(fips, year) %>% summarise(Total.Emissions = sum(Emissions))
names(pm25_baLA_onroad_year)[1] <- 'city'
pm25_baLA_onroad_year$city <- as.factor(pm25_baLA_onroad_year$city)
levels(pm25_baLA_onroad_year$city) <- c('LA','Baltimore')
g <- ggplot(pm25_baLA_onroad_year, aes(year, Total.Emissions))
g + geom_bar(stat='identity') + facet_grid(.~ city, scales='free_y') +
ggtitle('Comparison of Motor Vehicle Emissions from LA and Baltimore')
ggsave('plot6.png')
cat('Plot 6 has been saved in', getwd())
}
plot6()
plot6 <- function() {
LA <- '06037'
baltimore <- '24510'
NEI_baLA_onroad <- subset(NEI, fips %in% c(LA, baltimore) & type=='ON-ROAD')
pm25_baLA_onroad_year <- NEI_baLA_onroad[,c('fips','year','Emissions')] %>%
group_by(fips, year) %>% summarise(Total.Emissions = sum(Emissions))
names(pm25_baLA_onroad_year)[1] <- 'city'
pm25_baLA_onroad_year$city <- as.factor(pm25_baLA_onroad_year$city)
levels(pm25_baLA_onroad_year$city) <- c('LA','Baltimore')
g <- ggplot(pm25_baLA_onroad_year, aes(year, Total.Emissions))
g + geom_bar(stat='identity') + facet_grid(city ~., scales='free_y') +
ggtitle('Comparison of Motor Vehicle Emissions from LA and Baltimore')
ggsave('plot6.png')
cat('Plot 6 has been saved in', getwd())
}
plot6()
